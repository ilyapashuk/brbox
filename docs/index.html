<html>
<body>
<h1>утилита brbox</h1>
<p>данная утилита создана для ускорения процесса подготовки плоскопечатных текстов к печати по брайлю путём автоматизации некоторых рутинных операций, осуществляемых в процессе корректуры текста, таких как расставление цифровых знаков, перенос слов, замена ряда современных символов юникода, таких как символ многоточия, на соответствующие им брайлевские обозначения, удаление из текста символов, полностью неизвестных оборудованию. <br />
<h2>формат brf</h2>
<p>формат brf - это разработанный в северной Америке формат компьютерного представления брайлевских данных, в котором каждой из 64 комбинаций 6-точечного брайля сопоставлен символ из таблицы ASCII <br />
<p>сопоставления подобраны таким образом, чтобы текст мог прочесть не только незрячий пользователь при помощи брайлевского дисплея, но и зрячий, использующий монитор и не привычный к работе с брайлем. поэтому, например, точкам 12 соответствует заглавная английская буква B, а точкам 256 - цифра 4, а саму цифру 4 можно обозначить буквой D. <br />
<p>это позволяет зрячему пользователю заниматься подготовкой текста к брайлевской печати. <br />
<p>однако, удобный для английского языка, этот формат может быть не слишком пригоден для других языков, в том числе для Русского. <br />
<p>так, русская буква "ы" в brf обозначается восклицательным знаком, что никак не соответствует нашей традиции. <br />
<p>поэтому для корректуры текстов лучше использовать основанный на таблице сопоставлений промежуточный формат, приспособленный для конкретного языка. <br />
<p>в приложении данный формат назван bxt <br />
<p>к таблице формата bxt предъявляются следующие требования: <br />
<ul>
<li>таблица должна быть простым списком сопоставлений символ -> брайлевские точки без поддержки какой-либо контекстной информации, то есть это должна быть таблица компьютерного брайля, при этом допускается, чтобы несколько символов имели одно и то же брайлевское представление, например, цифра 1, буквы A и А могут одновременно быть сопоставлены с точкой 1. <br />
это приведёт к тому, что бэктрансляция по такой таблице будет выдавать не те символы, которые были в исходном документе (буквы вместо цифр, латинские буквы вместо кириллических, строчные вместо заглавных), которые тем не менее на брайлевском дисплее отобразятся также, как и исходный текст. <br />
также предъявляется требование "один символ - одна ячейка" то есть в результирующем брайлевском документе должно быть столько же символов, сколько было в исходном фале bxt. <br />
таким образом будет обеспечена предсказуемость и контролируемость процесса трансляции.
<li>таблица должна покрывать все 64 возможные комбинации 6-точечного брайля, то есть любой текст в 6-точечном брайле должно быть возможно отобразить при помощи данной таблицы.
</ul>
<a href=bxttable.html>документация по формату таблицы</a>
<p>в этом дистрибутиве используется таблица, похожая на ту, которая устанавливалась в старые принтеры indexbraille. <br />
<p>в общем случае работа с текстом при помощи утилиты включает в себя следующие этапы: <br />
<h2>преобразование текстового файла в bxt при помощи команды prepair</h2>
<p>на данном этапе на вход программе подаётся файл в формате txt в кодировке utf8 с bom. <br />
<p>при настройках поумолчанию к тексту файла применяются следующие преобразования: <br />
<ul>
<li>удаление пустых строк, строк, состоящих из одних только пробелов, а также сокращение последовательностей из более чем одного пробела до одного пробельного символа
<li>замена некоторых современных юникодных символов на их более простые версии. <br />
так, символ многоточия заменяется на 3 точки, различные вариации символа "тире" заменяются на обычный дефис.
<li>проставление цифровых знаков, аналогичного цифровому знаку символа перед знаком процента, признака большой латинской буквы перед символом градуса
<li>удаление пробелов после запятых
<li>расставление переносов в тексте так, чтобы размеры всех строк файла не превышали установленное в конфигурационном файле количество символов, умещающихся на одну строку брайлевского листа. <br />
для переноса слов используется библиотека github.com/speedata/hyphenation, реализующая алгоритм переноса, используемый в системе TeX, а также паттерны для русского языка с ctan. <br />
если эта функция выключена, осуществляется обычный перенос по словам
<li>все символы, относящиеся к брайлевскому юникоду, бэктранслируются по таблице. результат может иметь непривлекательный внешний вид, однако такие символы будут правильно отображены на брайлевском дисплее при ручном редактировании.
<li>символы, не прописанные в таблице, оставшиеся после всех этих преобразований, заменяются символом, соответствующим в таблице брайлевскому шеститочию.
</ul>
<p>таким образом, гарантируется, что файл, полученный на выходе, соответствует следующим условиям:
<ul>
<li>он содержит только символы, известные таблице bxt, а потому может быть без ошибок транслирован с её помощью
<li>длина ни одной из строк файла не превышает значения размера строки на брайлевском листе, заданного в конфиге.
</ul>
<p>таким образом, после команды prepair файл может быть сразу отправлен на печать и должен быть отпечатан технически корректно <br />
<h2>ручная корректура файла</h2>
<p>файл bxt - это обычный текстовый файл в utf8.
<p>пока что для его правки нужно использовать какой-то сторонний редактор. при этом следует подключить таблицу bxt к скринридеру, а редактор использовать такой, который показывает номер текущих строки и столбца в строке состояния. <br />
<p>если вы желаете осуществлять редактирование в системе, работающей в кодировке, отличной от utf8, например, в cp866, то вам следует вначале сконвертировать файл в эту кодировку
<h2>преобразование собственно в брайль</h2>
<p>для этого следует использовать команду conv, которая может преобразовывать, во всех направлениях, между bxt, brf, пока без поддержки служебных конструкций, и брайлевским юникодом
<p>такой файл уже можно отправлять на принтер <br />
<a href=program/index.html>справка собственно по приложению</a>
</body>
</html>